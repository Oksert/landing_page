<html><head></head><body><p></p><ol><li>Вкладку с историей можно скопировать с рабочей формы</li><li>Добавляем display option "Показать историю", если его еще нет для этого display screen'a</li><li>Проверяем наличие таблицы, в которой будут храниться изменения, её структура должна быть как у таблицы krhistorykrexample (правила именования: krhistory+<targetTableName>, например для таблицы krdept должна быть таблица с историей krhistorykrdept). Если таблицы не существует, создаем.</li><li>Добавляем запись в таблицу krhistorymaster с нашей таблицей + указываем отслеживаемые поля.</li><li>Проверяем, что аудируемые поля не пусты + в datadict для записи поля являются доступными.</li><li>Добавляем два триггера - на добавление и на обновление записей в таблице <targetTableName> - можно скопировать их по образцу с таблиц, где история уже работает.</li><li>По аналогии с krexample делаем заполнение полей вкладки "История" - дата создания, дата изменения, кем создано, кем изменено - см. процесс сохранения и добавления новой записи (krexample.add и krexample.save)</li></ol><p></p><p class="MsoNormal"><span style="font-size:12pt;"></span></p></body></html>