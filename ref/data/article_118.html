<html><head></head><body><h4 style="font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;color:#333333;">Данная статья описывает процесс установки и настройки локального веб-сервера с Idea Platform.</h4>Процесс установки описан на примере linux системы, но, для пользователей windows установка будет отличаться только путями к необходимым компонентам.<br><br><br>Итак, <span style="font-weight:700;">системные требования:</span><br>- jdk 1.7+;<br>- jre 1.7+;<br>- wildfly 8.2.0;<br>- apache ant;<br>- postgresql 9.4.*;<br>- дистрибутив IdeaPlatform.<br><br>Для начала установим необходмый софт.<br>Устанавливать будем в директорию<span style="font-weight:700;"> /opt</span>.<br><br><span style="font-weight:700;">JDK и JRE.</span><br>К использованию рекомендуется <span style="font-weight:700;">Oracle JDK</span>, скачать можно <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" title="JDK на официальном сайте Oracle">здесь</a>. Качаем последнюю доступную версию для своей операционной системы. В моем случае это linux x64. Помимо этого, нам необходим <span style="font-weight:700;">JRE</span>, скачиваем <a href="http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html" title="JRE на официальном сайте Oracle">здесь</a>, так же как и JDK, последнюю доступную версию для своей ОС.<br>Далее распаковываем скачанные архивы в <span style="font-weight:700;">/opt/jdk</span> и <span style="font-weight:700;">/opt/jre</span>.<br><br><span style="font-weight:700;">Wildfly.</span><br>Wildfly - java-сервер. Идем на <a href="http://wildfly.org/downloads/" title="Windfly официальный сайт.">официальный сайт</a>, находим версию 8.2.0 для своей ОС. Распаковываем архив в папку <span style="font-weight:700;">/opt/wildfly</span>.<br><br><span style="font-weight:700;">Apache Ant</span>.<br>Ant - инструмент для сборки java-приложений. Пользователи linux систем, как правило, могут установить его из официальных репозиториев своего дистрибутива. <br>Если его там не нашлось - идем <a href="http://ant.apache.org/bindownload.cgi" title="Apache Ant, страница загрузки.">сюда</a>. Скачиваем, распаковываем в /opt/ant. Дополнительно необходимо добавить папку /opt/ant/bin в PATH. А также установить переменную ANT_HOME=/opt/ant и переменную ANT_OPTS=-Xmx256M.<p></p><span style="font-weight:700;">Postgresql.</span><br>Postgres - база данных. Дистрибутив почти наверняка есть в официальных репозиториях вашего дистрибутива, поэтому устанавливаем, запускаем сервис с бд. После этого нам необходим дамп базы данных. //TODO: откуда брать дамп.<br><br><span style="font-weight:700;">IdeaPlaform.</span><br>Распаковываем дистрибутив в удобную вам директорию.<br><br>Теперь настроим.<br>Создаем файл <span style="font-weight:700;">system.properties</span>, в который записываем следующее:<blockquote><p>//если бд установлено локально и развернут дамп, менять следующие 3 строчки не надо.</p><p>dbConnectionUrl=jdbc:postgresql://127.0.0.1:5432/ip_dev </p><p>dbSystemSchema=system</p><p>dbUserName=system_user </p><p>//пароль к db узнаем там же, где получили дамп базы.</p><p>dbPassword=**** </p><p>//пути к распакованным jdk и jre</p><p>javaHomeJDK=/opt/jdk</p><p>javaHomeJRE=/opt/jre</p><p>//путь к папке внутри wildfly, в которую будет разворачиваться приложение и базовые параметры, менять не нужно.</p><p>deploymentFolder=deployments/IdeaPlatform_SAAS.war</p><p>attachmentMaxSize=20 </p><p>traceHttpRequestTime=true </p></blockquote><p>Этот файл нужно положить в <span style="font-weight:700;">три места</span>. <br>1.<span style="font-weight:700;"> /opt/wildfly/standalone/configuration</span><br>2. создать папку <span style="font-weight:700;">/opt/IPBuild/SAAS</span>, положить файл туда. Эта служебная директория сервера.<br>3. в папку с дистрибутивом. <span style="font-weight:700;">/path/to/distr/IdeaPlatform_SAAS</span><br><br>Теперь необходимо поправить файл <span style="font-weight:700;">/path/to/distr/IdeaPlatform_SAAS/trunk/build.xml</span>. В нем описана конфигурация сборки для Ant.</p><p>Нас интересует секция <span style="font-weight:700;">target doUnix</span>, в которой нам нужно указать <span style="font-weight:700;">пути к wildfly и служебной папке</span>.</p><blockquote><p>property name="ip.build.path" value="/opt/IPBuild/SAAS" </p><p>property name="wildfly.home" value="/opt/wildfly" </p></blockquote><p>На этом конфигурация закончена.</p><p>Для запуска проекта его необходимо собрать, для этого переходим в папку <span style="font-weight:700;">/path/to/distr/IdeaPlatform_SAAS/trunk/</span> и делаем <span style="font-weight:700;">ant install</span>.</p><p>Ant соберет проект и скопирует билд в папку сервера. Далее идем в<span style="font-weight:700;"> /opt/wildfly/bin</span> и запускаем веб-сервер командой <span style="font-weight:700;">./standalone.sh</span>.</p><p>Теперь можно перейти в браузере по адресу<span style="font-weight:700;"> localhost:8080</span> и проверить работоспособность.</p></body></html>