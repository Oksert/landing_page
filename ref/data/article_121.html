<html><head></head><body><p>Клиентские настройки могут иметь зависимость от стенда на которой они ставятся. Такие данные находятся в файле WebContent\scripts\constants.js</p><p>Сейчас там есть данные для SAAS, АСУ-МИЦ, МГЖД, которые выбираются по значению переменной окружения location.host.</p><p>Рассмотрим</p><p>window.hostcode = sha256(location.host);</p><p>if([<br>         '8b66872e4e14a025ea3fc7f7e837257bf4e2bfc7627b43e57b4ea1b80c74126e',<br>         '636302e89c443fe02b886d493bccd774dec4335ca33096aa28a05c1d672a4f01'<br>         ].indexOf(hostcode) >= 0){<br>.... <br>}<br></p><p>Чтобы лишний раз не светить IP серверов клиентов мы сверяем значение hash location.host с hash'ами ip адресов (сохранив это значение в глобальную переменную hostcode).</p><p>Чтобы добавить IP в старое правило необходимо вычислить хэши для комбинации ip плюс порт. Для этого нам нужен стенд  с определенной функцией  sha256 (сейчас таким является например SAAS DEV Linux).  Заходим на него и открываем консоль разработчика и вкладку с консолью. Пусть мы узнали, что АСУ-МИЦ получает домен с именем asu-mic.ru. Система должна работать на портах 8080 - тест и 80 - прод. Тогда в консоли мы вводим (порт 80 не указывается)</p><p>sha256('asu-mic.ru') и получаем </p><p>"98dff244a9ba74e9d582305b935889490dd68cf828de1647c834837484d5f4ec"</p>sha256('asu-mic.ru:8080') и получаем<br>"ae6f5fb06a9b3d510bad80ed0a62615134ca543f44167245ca8ce592dd2fbef6"<p></p><p>Полученные две строчки с хэшами добавляем в массив для АСУ-МИЦ.</p><div></div><p>Аналогично если нам нужен новый стенд - добавляем новое правило вида </p>//Для АО-ЁПРСТ<br>if([<br>         'hash1',<br>         'hash2'<br>         ].indexOf(hostcode) >= 0){<p></p><p>}</p><div></div></body></html>