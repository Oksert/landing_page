<h2 id="c2a0d09220d0bfd180d0bed0b3d180d0b0d0bcd0bcd0b520d0b2d181d0b5d0b3d0b4d0b020d0b5d181d182d18c20d183d0b7d0bad0b8d0b520d0bcd0b5d181d182d0b0">&nbsp;В программе всегда есть узкие места</h2><p><br /></p><p>Когда мы пишем нашу программу &nbsp;мы не знаем, какие места в ней будут выполняться чаще, а какие &ndash; дольше.</p><p>Мы можем только предположить.&nbsp;</p><p><br /></p><p>Нам нужно выяснить какие места ускорить. Рассмотрим два варианта:</p><p></p><ul><li>Логировать время выполнения наших методов самим</li><li>Использовать специализированное ПО (Java Mission Control, <a class="wiki_link" href="/wiki/show/vsm2_1step/VisualVM" title="VisualVM">VisualVM</a>)</li></ul><p></p><p><br /></p><h3 id="d09bd0bed0b3d0b8d180d0bed0b2d0b0d0bdd0b8d0b520d0b2d180d183d187d0bdd183d18e">Логирование вручную</h3><pre>long startTime = System.nanoTime();<br />methodToTime();<br />long endTime = System.nanoTime();<br />long duration = endTime - startTime;</pre><p><br /></p><p>Логирование вручную хорошо для быстрого измерения времени работы отдельных &nbsp;методов (В Anylogic часто реально удобнее)</p><p>Не пригодно для получения статистики собираемой самой JVM (использование &laquo;кучи&raquo;, время загрузки классов, нагрузка на сеть)</p><p><br /></p><h3 id="d098d181d0bfd0bed0bbd18cd0b7d0bed0b2d0b0d0bdd0b8d0b520d181d0bfd0b5d186d0b8d0b0d0bbd0b8d0b7d0b8d180d0bed0b2d0b0d0bdd0bdd0bed0b3d0be20d09fd09e">Использование специализированного ПО</h3><p></p><ul><li>Будем рассматривать Java Mission Control</li><li>Доступен с Java 7u40</li><li>Anylogic по умолчанию запускается с Java6</li><li>Подкладываем в папку Anylogic нужный JRE</li><li>Запускаем модель с параметрами</li><li>-XX:+<a class="wiki_link" href="/wiki/show/vsm2_1step/UnlockCommercialFeatures" title="UnlockCommercialFeatures">UnlockCommercialFeatures</a>
</li><li><span class="Apple-tab-span" style="white-space:pre;"> </span>-XX:+<a class="wiki_link" href="/wiki/show/vsm2_1step/FlightRecorder" title="FlightRecorder">FlightRecorder</a>
</li><li>Запускаем запись</li></ul><p></p><p><img src="https://www.assembla.com//spaces/vsm2_1step/documents/dCCZhmAxCr47uoacwqjQYw/download/dCCZhmAxCr47uoacwqjQYw" /><br /></p><h3 id="3c696d67207372633d2268747470733a2f2f7777772e617373656d626c612e636f6d2f2f7370616365732f76736d325f31737465702f646f63756d656e74732f646c356536326178637234353763616377716a7177752f646f776e6c6f61642f646c356536326178637234353763616377716a717775223e3c62723e"><img src="https://www.assembla.com//spaces/vsm2_1step/documents/dL5E62AxCr457cacwqjQWU/download/dL5E62AxCr457cacwqjQWU" /><br /></h3><h3 id="d09dd0b0d0b3d180d183d0b7d0bed187d0bdd0bed0b520d182d0b5d181d182d0b8d180d0bed0b2d0b0d0bdd0b8d0b5">Нагрузочное тестирование</h3><p></p><ul><li>Программы быстро работают на маленьких данных</li><li>Сайты не падают от нескольких пользователей</li><li>Важно правильно сэмулировать нагрузку на приложение</li></ul><p></p><p><br /></p><h3 id="d09dd0b0d0bfd0bed181d0bbd0b5d0b4d0bed0ba">Напоследок</h3><p></p><ul><li>Преждевременная оптимизация &mdash; корень всех (или большинства) проблем в программировании</li><li>Даже если программа написана и работает , не пытайтесь ускорить ее просто так, без профилирования</li><li>Вы должны оптимизировать те части, которые работают дольше всего во время нагрузочного тестирования</li></ul><p></p><p><br /></p>